{% extends 'base.html' %}
{% load static %}

{% block title %}
    sell property
{% endblock %}


{% block extracss %}
    <style>
        .collapsible {

            cursor: pointer;
            padding: 18px;
            width: 100%;

        }

        .active, .collapsible:hover {
            background-color: #555;
        }

        .content {

            display: none;
            overflow: hidden;

        }
    </style>

{% endblock %}


{% block content %}
    <div class="ct-site--map">
        <div class="container">
            <a href="{% url 'home' %}">Home</a>
            <a>Submit Property</a>
            <a>Steps</a>
        </div>
    </div>
    <header class="ct-mediaSection">
        <div class="ct-mediaSection-inner">
            <div class="container">
                <br>
                <div class="ct-steps--submission center-block ct-u-marginBottom20 setup-panel">
                    <div class="ct-steps--item">
                        <div class="ct-steps--counter ct-steps--active">
                            <a href="#step-1"></a>
                            <span>1</span>
                        </div>
                    </div>
                    <div class="ct-steps--item">
                        <div class="ct-steps--counter ct-steps--active">
                            <a href="#step-2"></a>
                            <span>2</span>
                        </div>
                    </div>
                    <div class="ct-steps--item">
                        <div class="ct-steps--counter ct-steps--active">
                            <span>3</span>
                        </div>
                    </div>
                    <div class="ct-steps--item">
                        <div class="ct-steps--counter ct-steps--active">
                            <span>4</span>
                        </div>
                    </div>
                </div>
                <div class="ct-u-displayTable ct-steps--title text-center">
                    <div class="ct-u-displayTableCell">
                        <span>Seller Details</span>
                    </div>
                    <div class="ct-u-displayTableCell">
                        <span>Property Details</span>
                    </div>
                    <div class="ct-u-displayTableCell">
                        <span>Price & Images</span>
                    </div>
                    <div class="ct-u-displayTableCell">
                        <span>Done!</span>
                    </div>
                </div>
            </div>
            <br>
        </div>
    </header>
    <section class="ct-u-paddingTop50 ct-u-paddingBottom100" style="margin-left: 15%">
        <div class="container">
            <div class="ct-headerText--normal text-uppercase ct-u-marginBottom40">
                <h2>Step 1
                    <span class="ct-text--highlightGray">Seller Details</span>
                </h2>
            </div>
            <div class="row">
                <div class="col-md-6">
                    {% if form.errors %}
                        {% for field in form %}
                            {% for error in field.errors %}
                                <div class="alert alert-danger">
                                    <strong>{{ error|escape }}</strong>
                                </div>
                            {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                            <div class="alert alert-danger">
                                <strong>{{ error|escape }}</strong>
                            </div>
                        {% endfor %}
                    {% endif %}
                    <form method="post" enctype="multipart/form-data" id="propertyform"
                          data-subtype-url="{% url 'ajax_load_subtypes' %}">
                        {% csrf_token %}
                        <div class="form-group">

                            <div class="row ct-u-marginBottom10">
                                <div class="col-md-6">
                                    <span class="span ct-u-marginBottom10">Seller Name</span>
                                    {{ form.UploaderName }}
                                </div>

                                <div class="col-md-6">
                                    <span class="span ct-u-marginBottom10">Seller Phone Number</span>
                                    {{ form.UploaderNumber }}
                                </div>

                                <div class="col-md-12">
                                    <span class="span ct-u-marginBottom10">Seller Address</span>
                                    {{ form.UploaderAddress }}
                                </div>
                                <div class="col-md-6">
                                    <span class="span ct-u-marginBottom10">Zip Code</span>
                                    {{ form.UploaderZip }}
                                </div>
                                <div class="col-md-6">
                                    <span class="span ct-u-marginBottom10">Seller Email</span>
                                    {{ form.UploaderEmail }}
                                </div>
                            </div>
                            <button type="button" class="ct-u-marginBottom20  btn btn-warning btn-sm collapsible">
                                Continue to Step 2
                            </button>


                            <div class="content">


                                <div class="ct-headerText--normal text-uppercase ct-u-marginBottom40">
                                    <h2>Step 2
                                        <span class="ct-text--highlightGray">Property Details</span>
                                    </h2>
                                </div>

                                <div class="row ct-u-marginBoth10">
                                    <div class="col-md-6">
                                        <span class="span ct-u-marginBottom10">Type</span>
                                        {{ form.City }}
                                    </div>

                                    <div class="col-md-6">
                                        <span class="span ct-u-marginBottom10">Sub-Type</span>
                                        {{ form.Region }}
                                    </div>
                                    <div class="col-md-6">
                                        <span class="span ct-u-marginBottom10">Type</span>
                                        {{ form.PropertyType }}
                                    </div>

                                    <div class="col-md-6">
                                        <span class="span ct-u-marginBottom10">Sub-Type</span>
                                        {{ form.SubType }}
                                    </div>

                                    <div class="col-md-12">
                                        <span class="span ct-u-marginBottom10">Address of Property</span>
                                        {{ form.Address }}
                                    </div>
                                    <div class="col-md-12">
                                        <span class="span ct-u-marginBottom10">Property Zip Code</span>
                                        {{ form.Zipcode }}
                                    </div>
                                    <div class="col-md-12 ct-u-marginBottom10">
                                         <label class="ct-fw-600 text-uppercase ct-u-marginBottom10">Property description</label>
                                            {{ form.Description|safe }}
                                    </div>
                                </div>
                                <button type="button" class="ct-u-marginBottom20 btn btn-warning btn-sm collapsible">
                                    Continue to Step 3
                                </button>
                                <div class="content">
                                    <div class="ct-headerText--normal text-uppercase ct-u-marginBottom20">
                                        <h2>Step 3
                                            <span class="ct-text--highlightGray">Price and Images</span>
                                        </h2>
                                    </div>
                                    <label class="ct-fw-600 text-uppercase ct-u-marginBottom10">Set price of your
                                        property</label>
                                    <div class="row ct-u-marginBoth10">

                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Min Price</span>
                                            {{ form.MinPrice }}
                                        </div>

                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Max Price</span>
                                            {{ form.MaxPrice }}
                                        </div>

                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Area</span>
                                            {{ form.Area }}
                                        </div>
                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Area Unit</span>
                                            {{ form.Areaunit }}
                                        </div>

                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Beds</span>
                                            {{ form.Beds }}
                                        </div>
                                        <div class="col-md-6">
                                            <span class="span ct-u-marginBottom10">Kitchen</span>
                                            {{ form.kitchen }}
                                        </div>

                                    </div>
                                    <label class="ct-fw-600 text-uppercase ">Upload featured
                                        image</label>
                                    <p class="ct-u-marginBottom40">This is going to be the main image of property, it
                                        will be shown in thumbnails and First two are important.</p>
                                    <div class="row ct-u-marginBottom20">

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_BannerImage" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="BannerImage" id="id_BannerImage"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_BannerImage').src = window.URL.createObjectURL(this.files[0])">
                                        </div>

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_image1" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="image1" id="id_image1"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_image1').src = window.URL.createObjectURL(this.files[0])">
                                        </div>

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_image2" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="image2" id="id_image2"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_image2').src = window.URL.createObjectURL(this.files[0])">
                                        </div>

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_image3" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="image3" id="id_image3"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_image3').src = window.URL.createObjectURL(this.files[0])">
                                        </div>

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_image4" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="image4" id="id_image4"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_image4').src = window.URL.createObjectURL(this.files[0])">
                                        </div>

                                        <div style="margin-bottom: 1%" class="col-md-6">
                                            <img style="margin-bottom: 2%" id="id_image5" src="img.png"
                                                 onerror="this.onerror=null; this.src='{% static 'assets/images/img-icon-14.png' %}';"
                                                 alt=""
                                                 width="100" height="100"/>

                                            <input type="file" name="image5" id="id_image5"
                                                   class="btn btn-info btn-xs"
                                                   onchange="document.getElementById('id_image5').src = window.URL.createObjectURL(this.files[0])">
                                        </div>
                                    </div>
                                    <input class="btn btn-warning btn-sm" value="Submit Ad" type="submit">
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>


{% endblock %}

{% block extrajs %}
    <script>
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                } else {
                    content.style.display = "block";
                }
            });
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        $("#id_PropertyType").change(function () {
            var url = $("#propertyform").attr("data-subtype-url");  // get the url of the `load_cities` view
            var countryId = $(this).val();  // get the selected country ID from the HTML input
            $.ajax({                       // initialize an AJAX request
                url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'country': countryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#id_SubType").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });
    </script>
{% endblock %}
